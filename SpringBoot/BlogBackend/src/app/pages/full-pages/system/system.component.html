<div class="row">
  <div class="col-12">
    <div class="content-header"><i class="ft-settings"></i>&nbsp;System Management</div>
  </div>
</div>
<section id="input-style">
  <!---------Data Table------------->
  <section id="configuration">
    <div class="row">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <h4 class="card-title">Accounts</h4>
            <div class="btn-container">
              <input class="form-control" type="text" (input)="dt1.filterGlobal($event.target.value, 'contains')"
                placeholder="Search keyword" />
            </div>
            <div class="btn-container">
              <button type="button" (click)="onAddAccount()" class="btn btn-primary mr-1 mb-1"><i
                  class="ft-plus"></i>&nbsp;Add User</button>
            </div>
          </div>

          <div class="card-content">
            <div class="card-body">

              <p-table #dt1 [columns]="cols" [value]="accountList$ |async" styleClass="p-datatable-responsive-demo"
                [paginator]="true" [rows]="5" [rowsPerPageOptions]="[5,10,25,50]" [scrollable]="true"
                scrollHeight="600px" [virtualRowHeight]="34" [showCurrentPageReport]="true" dataKey="code"
                [globalFilterFields]="['account','department','name', 'role']"
                currentPageReportTemplate="Showing {first} to {last} , Total {totalRecords}">

                <ng-template pTemplate="header" let-columns>
                  <tr>
                    <th *ngFor="let col of columns">
                      {{col.header}}
                    </th>
                  </tr>
                </ng-template>
                <ng-template pTemplate="body" let-rowData let-columns="columns" let-i="rowIndex">
                  <tr [pSelectableRow]="rowData">

                    <td>{{rowData.account}}</td>
                    <td>{{rowData.name}}</td>
                    <td>{{rowData.department |departmentPipe}}</td>
                    <td>{{rowData.role |adminRolePipe}}</td>
                    <td>
                      <button type="button" (click)="onEdit(rowData.adminId)" class="btn btn-info mr-1 mb-1"><i class="ft-edit"></i>&nbsp;Edit</button>
                      <button *ngIf="rowData.status == 1" (click)="onChangeStatus(rowData.adminId, 0, rowData.account)"
                        type="button" class="btn btn btn-danger mr-1 mb-1"><i class="ft-x-circle"></i>&nbsp;Disable</button>
                      <button *ngIf="rowData.status == 0" (click)="onChangeStatus(rowData.adminId, 1, rowData.account)"
                        type="button" class="btn btn-primary mr-1 mb-1"><i
                          class="ft-check-circle"></i>&nbsp;Enable</button>
                    </td>
                  </tr>
                </ng-template>
              </p-table>

            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</section>
